<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>Chapter&nbsp;3.&nbsp;Upgrading</title><link rel="stylesheet" type="text/css" href="../css/freebsd_docbook.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="book.html" title="The Apache HBase&#153; Reference Guide"><link rel="up" href="book.html" title="The Apache HBase&#153; Reference Guide"><link rel="prev" href="dyn_config.html" title="2.7.&nbsp;Dynamic Configuration"><link rel="next" href="upgrade1.0.html" title="3.2.&nbsp;Upgrading from 0.98.x to 1.0.x"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;3.&nbsp;Upgrading</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="dyn_config.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="upgrade1.0.html">Next</a></td></tr></table><hr></div><script type="text/javascript">
    var disqus_shortname = 'hbase'; // required: replace example with your forum shortname
    var disqus_url = 'http://hbase.apache.org/book/upgrading.html';
    </script><div class="chapter" title="Chapter&nbsp;3.&nbsp;Upgrading"><div class="titlepage"><div><div><h2 class="title"><a name="upgrading"></a>Chapter&nbsp;3.&nbsp;Upgrading</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="upgrading.html#hbase.versioning">3.1. HBase version numbers</a></span></dt><dd><dl><dt><span class="section"><a href="upgrading.html#hbase.development.series">3.1.1. Odd/Even Versioning or "Development"" Series Releases</a></span></dt><dt><span class="section"><a href="upgrading.html#hbase.binary.compatibility">3.1.2. Binary Compatibility</a></span></dt><dt><span class="section"><a href="upgrading.html#hbase.rolling.upgrade">3.1.3. <em class="firstterm">Rolling Upgrades</em></a></span></dt></dl></dd><dt><span class="section"><a href="upgrade1.0.html">3.2. Upgrading from 0.98.x to 1.0.x</a></span></dt><dd><dl><dt><span class="section"><a href="upgrade1.0.html#upgrade1.0.changes">3.2.1. Changes of Note!</a></span></dt><dt><span class="section"><a href="upgrade1.0.html#upgrade1.0.rolling.upgrade">3.2.2. Rolling upgrade from 0.98.x to HBase 1.0.0</a></span></dt><dt><span class="section"><a href="upgrade1.0.html#upgrade1.0.from.0.94">3.2.3. Upgrading to 1.0 from 0.94</a></span></dt></dl></dd><dt><span class="section"><a href="upgrade0.98.html">3.3. Upgrading from 0.96.x to 0.98.x</a></span></dt><dt><span class="section"><a href="ch03s04.html">3.4. Upgrading from 0.94.x to 0.98.x</a></span></dt><dt><span class="section"><a href="upgrade0.96.html">3.5. Upgrading from 0.94.x to 0.96.x</a></span></dt><dd><dl><dt><span class="section"><a href="upgrade0.96.html#executing.the.0.96.upgrade">3.5.1. Executing the 0.96 Upgrade</a></span></dt></dl></dd><dt><span class="section"><a href="upgrade0.94.html">3.6. Upgrading from 0.92.x to 0.94.x</a></span></dt><dt><span class="section"><a href="upgrade0.92.html">3.7. Upgrading from 0.90.x to 0.92.x</a></span></dt><dd><dl><dt><span class="section"><a href="upgrade0.92.html#d2875e4912">3.7.1. You can&#8217;t go back! </a></span></dt><dt><span class="section"><a href="upgrade0.92.html#d2875e4926">3.7.2. MSLAB is ON by default </a></span></dt><dt><span class="section"><a href="upgrade0.92.html#dls">3.7.3. Distributed Log Splitting is on by default </a></span></dt><dt><span class="section"><a href="upgrade0.92.html#d2875e4959">3.7.4. Memory accounting is different now </a></span></dt><dt><span class="section"><a href="upgrade0.92.html#d2875e4968">3.7.5. On the Hadoop version to use </a></span></dt><dt><span class="section"><a href="upgrade0.92.html#d2875e4980">3.7.6. HBase 0.92.0 ships with ZooKeeper 3.4.2 </a></span></dt><dt><span class="section"><a href="upgrade0.92.html#d2875e4985">3.7.7. Online alter is off by default </a></span></dt><dt><span class="section"><a href="upgrade0.92.html#d2875e4992">3.7.8. WebUI </a></span></dt><dt><span class="section"><a href="upgrade0.92.html#d2875e4997">3.7.9. Security tarball </a></span></dt><dt><span class="section"><a href="upgrade0.92.html#d2875e5002">3.7.10. Changes in HBase replication </a></span></dt><dt><span class="section"><a href="upgrade0.92.html#d2875e5007">3.7.11. RegionServer now aborts if OOME </a></span></dt><dt><span class="section"><a href="upgrade0.92.html#d2875e5012">3.7.12. HFile V2 and the &#8220;Bigger, Fewer&#8221; Tendency </a></span></dt></dl></dd><dt><span class="section"><a href="upgrade0.90.html">3.8. Upgrading to HBase 0.90.x from 0.20.x or 0.89.x</a></span></dt></dl></div><p>You cannot skip major versions upgrading. If you are upgrading from version 0.90.x to
        0.94.x, you must first go from 0.90.x to 0.92.x and then go from 0.92.x to 0.94.x.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>It may be possible to skip across versions -- for example go from 0.92.2 straight to
            0.98.0 just following the 0.96.x upgrade instructions -- but we have not tried it so
            cannot say whether it works or not.</p></div><p> Review <a class="xref" href="configuration.html" title="Chapter&nbsp;2.&nbsp;Apache HBase Configuration">Chapter&nbsp;2, <i>Apache HBase Configuration</i></a>, in particular the section on Hadoop version. </p><div class="section" title="3.1.&nbsp;HBase version numbers"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="hbase.versioning"></a>3.1.&nbsp;HBase version numbers</h2></div></div></div><p>HBase has not walked a straight line where version numbers are concerned. Since we
            came up out of hadoop itself, we originally tracked hadoop versioning. Later we left
            hadoop versioning behind because we were moving at a different rate to that of our
            parent. If you are into the arcane, checkout our old wiki page on <a class="link" href="http://wiki.apache.org/hadoop/Hbase/HBaseVersions" target="_top">HBase
                Versioning</a> which tries to connect the HBase version dots.</p><div class="section" title="3.1.1.&nbsp;Odd/Even Versioning or &#34;Development&#34;&#34; Series Releases"><div class="titlepage"><div><div><h3 class="title"><a name="hbase.development.series"></a>3.1.1.&nbsp;Odd/Even Versioning or "Development"" Series Releases</h3></div></div></div><p>Ahead of big releases, we have been putting up preview versions to start the
                feedback cycle turning-over earlier. These "Development" Series releases, always
                odd-numbered, come with no guarantees, not even regards being able to upgrade
                between two sequential releases (we reserve the right to break compatibility across
                "Development" Series releases). Needless to say, these releases are not for
                production deploys. They are a preview of what is coming in the hope that interested
                parties will take the release for a test drive and flag us early if we there are
                issues we've missed ahead of our rolling a production-worthy release. </p><p>Our first "Development" Series was the 0.89 set that came out ahead of HBase
                0.90.0. HBase 0.95 is another "Development" Series that portends HBase 0.96.0.
            </p></div><div class="section" title="3.1.2.&nbsp;Binary Compatibility"><div class="titlepage"><div><div><h3 class="title"><a name="hbase.binary.compatibility"></a>3.1.2.&nbsp;Binary Compatibility</h3></div></div></div><p>When we say two HBase versions are compatible, we mean that the versions are wire
                and binary compatible. Compatible HBase versions means that clients can talk to
                compatible but differently versioned servers. It means too that you can just swap
                out the jars of one version and replace them with the jars of another, compatible
                version and all will just work. Unless otherwise specified, HBase point versions are
                binary compatible. You can safely do rolling upgrades between binary compatible
                versions; i.e. across point versions: e.g. from 0.94.5 to 0.94.6. See <a class="link" href="http://search-hadoop.com/m/bOOvwHGW981/Does+compatibility+between+versions+also+mean+binary+compatibility%253F&amp;subj=Re+Does+compatibility+between+versions+also+mean+binary+compatibility+" target="_top">Does
                            compatibility between versions also mean binary compatibility?</a>
                        discussion on the hbaes dev mailing list. </p></div><div class="section" title="3.1.3.&nbsp;Rolling Upgrades"><div class="titlepage"><div><div><h3 class="title"><a name="hbase.rolling.upgrade"></a>3.1.3.&nbsp;<em class="firstterm">Rolling Upgrades</em></h3></div></div></div><p>A rolling upgrade is the process by which you update the servers
            in your cluster a server at a time. You can rolling upgrade across HBase versions
            if they are binary or wire compatible.
            See <span style="color: red">&lt;xlnk&gt;&lt;/xlnk&gt;</span> for more on what this means.
            Coarsely, a rolling upgrade is a graceful stop each server,
            update the software, and then restart.  You do this for each server in the cluster.
            Usually you upgrade the Master first and then the regionservers.
            See <span style="color: red">&lt;xlink&gt;&lt;/xlink&gt;</span> for tools that can help use the rolling upgrade process.
          </p><p>For example, in the below, hbase was symlinked to the actual hbase install.
            On upgrade, before running a rolling restart over the cluser, we changed the symlink
            to point at the new HBase software version and then ran 
            </p><pre class="programlisting">$ HADOOP_HOME=~/hadoop-2.6.0-CRC-SNAPSHOT ~/hbase/bin/rolling-restart.sh --config ~/conf_hbase</pre><p>
            The rolling-restart script will first gracefully stop and restart the master, and then
            each of the regionservers in turn. Because the symlink was changed, on restart the
            server will come up using the new hbase version.  Check logs for errors as the
            rolling upgrade proceeds.
          </p><div class="section" title="3.1.3.1.&nbsp;Rolling Upgrade between versions that are Binary/Wire compatibile"><div class="titlepage"><div><div><h4 class="title"><a name="hbase.rolling.restart"></a>3.1.3.1.&nbsp;Rolling Upgrade between versions that are Binary/Wire compatibile</h4></div></div></div><p>Unless otherwise specified, HBase point versions are binary compatible. You can do
              a <span style="color: red">&lt;xlink&gt;&lt;/xlink&gt;</span> between hbase point versions.
                For example, you can go to 0.94.6 from 0.94.5 by doing a rolling upgrade
                across the cluster replacing the 0.94.5 binary with a 0.94.6 binary.</p><p>In the minor version-particular sections below, we call out where the versions
                are wire/protocol compatible and in this case, it is also possible to do a
                <span style="color: red">&lt;xlink&gt;&lt;/xlink&gt;</span>. For example, in
            <span style="color: red">&lt;xlink&gt;&lt;/xlink&gt;</span>, we
              state that it is possible to do a rolling upgrade between hbase-0.98.x and hbase-1.0.0.</p></div></div></div></div><div id="disqus_thread"></div><script type="text/javascript">
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dyn_config.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="upgrade1.0.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2.7.&nbsp;Dynamic Configuration&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="book.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;3.2.&nbsp;Upgrading from 0.98.x to 1.0.x</td></tr></table></div></body></html>